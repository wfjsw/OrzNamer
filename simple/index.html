<!DOCTYPE html>
<html lang="zh-cn">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#6485ae">
<title>##Orz 改名部</title>
<link href="style.css" rel="stylesheet">
<script>
function getParameterByName(name) {
    name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
    var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
        results = regex.exec(location.search);
    return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
}
function redir_for_name(newname) {
    var getreq = JSON.parse(window.atob(location.search.substring(1)));
    var rawquery = '00' + escape(newname);
    var query = rawquery;
    var queryuri = 'https://telegram.me/' + getreq.callback + '?start=' + query;
    location.href = queryuri;
}

function UpdateName() {
    redir_for_name(document.getElementById("newname").value);
}
function BackButtonClick() {
	history.back();
	window.close();
}
document.addEventListener('DOMContentLoaded', function() {
	document.getElementById("back_button").addEventListener("click", BackButtonClick);
	var getreq = JSON.parse(window.atob(location.search.substring(1)));
	document.getElementById('prefix').innerText = unescape(getreq.prefix);
});
</script>
</head>
<body>
<header id="header">
	<button id="back_button">
	<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAQAAABNTyozAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAUwwAAFMMAU3V+hAAAAAHdElNRQffCxwMLDRTPLsTAAABPklEQVR42u3Xy03DQBiFUSdFUQH1wDLhpXhJeLXLjksHv+Wxktia83UwRyP7zjBIkiRJkiRJkiRJunIZ806h4kmSM4mKJ0k+aFQ8iCZ5kuSTSsWTJF9kKp4k+aZT8STJD56p7vFUveHBgwcPHjx48ODBgwcPHjx48ODBgwcPHjx48ODBgwcPHjx48ODBgwfPpdot4RlOGzzwzBPv++KZ3x7PBYD64WkC6omnAagvnpYb9NvXlJkNtDsPR0CIlv3FeiJq3EH9EDUv6d6+RW17+uAtjwjRGoheESFChGgFRC+IECFChGgLRM+IECFCtAKiJ0SIECFCtAWiIyJEiBCtgOiACBEiRDcn+ssjoimiB0SIEC0lGieJ7tyiqtOggghPSYSnJMJTEuEpifCURHjKXTRSkCRJkiRJkiRJkq7dP5eXYZ/lj6SsAAAAAElFTkSuQmCC" alt="返回" width="24" height="24">
	</button>
	<div id="headerdiv">
		<div id="headerwrap">
		<img id="photoh" src="orz.png"> <h1 id="pagetitle">##Orz 改名部</h1>
		</div>
	</div>
</header>
<div id="container">
<section id="appmain">
	<div id="btncontainer">
	<input class="btn btnmain" type="submit" value="更新群名" id="fsubmit" onclick="UpdateName();">
	</div>
	<h2>设置新群名</h2>
	<p id="prefix">{{ prefix }}</p>
	<textarea name="n" type="text" id="newname" placeholder="输入改名内容，用' - '分开…" rows="5"></textarea>
</section>
</div>
</body>
</html>
